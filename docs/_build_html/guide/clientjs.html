<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Javascript Client &mdash; Pico 2.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Pico 2.0.0 documentation" href="../index.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-javascript-client">
<span id="clientjs"></span><h1>The Javascript Client<a class="headerlink" href="#the-javascript-client" title="Permalink to this headline">¶</a></h1>
<p>The Pico Javascript client makes it simple to call your API from a web application.
The client automatically generates proxy module objects and functions for your API so you can call your API functions just like any other library functions. All serialisation of arguments and deserialisation of responses is taken care of by the client so you can focus on your application logic.</p>
<p>The only thing you need to be aware of is that all function calls are asynchronous so you must pass a callback to each function (or use promises).</p>
<div class="section" id="basic-structure">
<h2>Basic Structure<a class="headerlink" href="#basic-structure" title="Permalink to this headline">¶</a></h2>
<p>The basic structure of a web app using the Pico Javascript client is as follows:</p>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Pico Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="hll"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;client.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="hll">  <span class="nx">pico</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">);</span>
</span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;message&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="hll">  <span class="nx">example</span><span class="p">.</span><span class="nx">hello</span><span class="p">(</span><span class="s2">&quot;Fergal&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
</span><span class="hll">    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
</span><span class="hll">  <span class="p">});</span>
</span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Line 5: We include Pico&#8217;s <cite>client.js</cite> library on inside the <cite>head</cite> of the document.</li>
<li>Line 7: We load our <cite>example</cite> module in a <cite>script</cite> element in the <cite>head</cite>.</li>
<li>Line 13-15: We use our <cite>hello</cite> function from a <cite>script</cite> element in the <cite>body</cite>.</li>
</ul>
<p>The order and position of these elements within the document is important. <cite>client.js</cite> must always be loaded before the call to <cite>pico.load</cite> and these both must be in the <cite>head</cite> of the document to ensure they have completed by the time they are used later.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="asynchronous-functions">
<h3>Asynchronous functions<a class="headerlink" href="#asynchronous-functions" title="Permalink to this headline">¶</a></h3>
<p>Each of these functions is asynchronous, meaning that they will not wait for the result before returning, instead they immediately return and later provide the result by calling a callback with the result as a parameter. For this reason all of these functions have a callback as the last argument.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pico</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">module</span><span class="p">){</span>
    <span class="n">module</span><span class="o">.</span><span class="n">hello</span><span class="p">(</span><span class="n">pico</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Here we load the <cite>example</cite> module and then call its <cite>hello</cite> function from within a callback once the module has loaded. <cite>module.hello</cite> is also passed a callback which logs the response to the console when it has been retrieved from the server.</p>
<p>An alternative coding style is to use deferred objects. In this style we don&#8217;t pass a callback to the function, instead we attach a callback to a deferred object returned by the function.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">pico</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">);</span>
<span class="n">d</span><span class="o">.</span><span class="n">done</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">module</span><span class="p">){</span>
    <span class="n">module</span><span class="o">.</span><span class="n">hello</span><span class="p">(</span><span class="n">pico</span><span class="o">.</span><span class="n">log</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p><cite>d.done(function(...){...})</cite> sets callback to be called once the response is available. The deferred object <cite>d</cite> also allows setting a callback in case of an error <cite>d.fail(function(...){...})</cite>. Pico deferred objects implement the same API as [JQuery deferred objects](<a class="reference external" href="http://api.jquery.com/category/deferred-object/">http://api.jquery.com/category/deferred-object/</a>).</p>
<p>All functions that take a callback as the last argument can also be used in deferred object style so feel free to use the style you prefer or mix and match as appropriate.</p>
<dl class="function">
<dt id="pico.load">
<code class="descclassname">pico.</code><code class="descname">load</code><span class="sig-paren">(</span><em>module</em><span class="optional">[</span>, <em>callback</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pico.load" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>module</strong> (<em>string</em>) &#8211; The name of the module to load.</li>
<li><strong>callback</strong> &#8211; <p>Gets called with the module object.</p>
<p>Load the Python module named <cite>module</cite>. The module will be available as a global variable of the same name.
Submodules may be loaded by using dotted notation e.g. <cite>module.sub_module</cite>.
<cite>module</cite> may also be a full url to module on a different Pico server eg. <cite>http://example.com/module/my_module</cite>
If provided the <cite>callback</cite> will be called with the module object once it is loaded.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pico.load_as">
<code class="descclassname">pico.</code><code class="descname">load_as</code><span class="sig-paren">(</span><em>module</em>, <em>alias</em><span class="optional">[</span>, <em>callback</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pico.load_as" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>module</strong> (<em>string</em>) &#8211; The name of the module to load.</li>
<li><strong>module</strong> &#8211; The global name you want to use for this module.</li>
<li><strong>callback</strong> &#8211; <p>Gets called with the module object.</p>
<p>Same as <cite>pico.load</cite> except that the <cite>module</cite> will be available as a global variable called <cite>alias</cite> instead of <cite>module</cite>. Use this version if you already have a variable with the same name as <cite>module</cite> that you do not wish to overwrite or if your module name is long/awkward.
Similar to <cite>import foo as bar</cite> in Python.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pico.reload">
<code class="descclassname">pico.</code><code class="descname">reload</code><span class="sig-paren">(</span><em>module_proxy</em><span class="optional">[</span>, <em>callback</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pico.reload" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>module_proxy</strong> (<em>object</em>) &#8211; The module to reload.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Reload the module definition and recreate the module proxy for the supplied <cite>module_proxy</cite> object.
Note that <cite>module_proxy</cite> is a module proxy object, not a string.</p>
</dd></dl>

</div>
<div class="section" id="synchronous-functions">
<h3>Synchronous functions<a class="headerlink" href="#synchronous-functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="pico.help">
<code class="descclassname">pico.</code><code class="descname">help</code><span class="sig-paren">(</span><em>proxy_object</em><span class="sig-paren">)</span><a class="headerlink" href="#pico.help" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>proxy_object</strong> (<em>object</em>) &#8211; The function or module proxy you want help for.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the docstring of a proxy module or function.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="callback-helper-functions">
<h3>Callback helper functions<a class="headerlink" href="#callback-helper-functions" title="Permalink to this headline">¶</a></h3>
<p>These functions are provided primarily for use as callbacks.</p>
<dl class="function">
<dt id="pico.log">
<code class="descclassname">pico.</code><code class="descname">log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pico.log" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple wrapper for <cite>console.log</cite> that can be passed as a callback to log the response to the Javascript console.</p>
</dd></dl>

<dl class="function">
<dt id="pico.set">
<code class="descclassname">pico.</code><code class="descname">set</code><span class="sig-paren">(</span><em>name</em><span class="optional">[</span>, <em>root</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pico.set" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>string</em>) &#8211; the variable to set the value of.</li>
<li><strong>root</strong> (<em>object</em>) &#8211; the object to which the variable will be attached.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Return a function which may be used as a callback for the setting the value of a variable <cite>name</cite> with the response. If specified, the variable will be attached to <cite>root</cite> instead of the <cite>window</cite> global object.
<cite>pico.set(&#8220;foo&#8221;)</cite> is shorthand for <cite>function(response){window.foo = response}</cite></p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Pico</a></h1>



<p class="blurb">Pico is a very small HTTP API framework for Python</p>



<p>
<iframe src="https://ghbtns.com/github-btn.html?user=fergalwalsh&repo=pico&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Javascript Client</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-structure">Basic Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="installation.html" title="previous chapter">Installation</a></li>
  </ul></li>
</ul>
</div><h3>Useful Links</h3>
<ul>
  <li><a href="http://github.com/fergalwalsh/pico">Pico @ GitHub</a></li>
  <li><a href="http://pypi.python.org/pypi/pico">Pico @ PyPI</a></li>
  <li><a href="http://github.com/fergalwalsh/pico/issues">Issue Tracker</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Fergal Walsh.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="../_sources/guide/clientjs.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>